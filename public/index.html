<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!--suppress HtmlUnknownTarget -->
  <link rel="icon" href="/favicon.ico" type="image/x-icon" />
  <title>Much Select</title>
  <link href="demo-styles.css" rel="stylesheet">
</head>

<body>

<h1>Much-Select</h1>

<h2>Demo and Development Playground</h2>

<nav>
  <ol class="main-nav">
    <li class="main-nav-item"><a href="initial-value.html">Initial Value</a></li>
    <li class="main-nav-item"><a href="option-api.html">Option API</a></li>
    <li class="main-nav-item"><a href="events.html">Events</a></li>
    <li class="main-nav-item"><a href="empty-options.html">Empty Options</a></li>
    <li class="main-nav-item"><a href="dropdown-options.html">Dropdown Options</a></li>
    <li class="main-nav-item"><a href="fancy-characters.html">Fancy Characters</a></li>
    <li class="main-nav-item"><a href="custom-options.html">Custom Options</a></li>
    <li class="main-nav-item"><a href="slots.html">Slots</a></li>
  </ol>
</nav>

<div class="container">

  <div>
    <h3>Simple Example</h3>
    <much-select>
      <select slot="select-input">
        <option>Bricks</option>
        <option>Sticks</option>
        <option>Straw</option>
      </select>
    </much-select>
  </div>

  <div>
    <h3>Multi Select</h3>
    <much-select multi-select="true">
      <select slot="select-input">
        <option>Red</option>
        <option>Yellow</option>
        <option>Orange</option>
        <option>Green</option>
        <option>Blue</option>
        <option>Purple</option>
      </select>
    </much-select>
  </div>

  <div>
    <h3>Option Groups</h3>
    <much-select>
      <select slot="select-input">
        <optgroup label="Primary">
          <option>Red</option>
          <option>Yellow</option>
          <option>Blue</option>
        </optgroup>
        <optgroup label="Secondary">
          <option>Orange</option>
          <option>Green</option>
          <option>Purple</option>
        </optgroup>
      </select>
    </much-select>
  </div>

  <div>
    <h3>Options with Descriptions</h3>
    <much-select>
      <select slot="select-input">
        <option data-description="scarlet, vermilion, ruby, ruby red, ruby-colored, cherry">Red</option>
        <option data-description="yellowish, yellowy, lemon, lemony, amber, gold, golden; blond, light brown, fair, flaxen">Yellow</option>
        <option data-description=" sky blue, azure, cobalt (blue), sapphire, cerulean, navy (blue), saxe (blue), Oxford blue, Cambridge blue, ultramarine">Blue</option>
        <option data-description="A town in France">Orange</option>
        <option data-description="greenish, viridescent; olive green, pea green, emerald green, lime green, bottle green">Green</option>
        <option data-description="violet">Purple</option>
      </select>
    </much-select>
  </div>

  <div>
    <h3>Options Label and Values</h3>
    <p>The labels and values are different</p>
    <much-select>
      <select slot="select-input">
        <option value="monkey">üêí</option>
        <option value="tree">üå≥</option>
        <option value="panda">üêº</option>
        <option value="ladybug">üêû</option>
        <option value="butterfly">ü¶ã</option>
        <option value="rabbit">üêá</option>
      </select>
    </much-select>
  </div>

  <div>
    <h3>An initial value</h3>
    <p>Set using the <code>selected</code> attribute on the <code>&lt;much-select&gt;</code></p>
    <much-select selected="Blue">
      <select slot="select-input">
        <option data-description="scarlet, vermilion, ruby, ruby red, ruby-colored, cherry">Red</option>
        <option data-description="yellowish, yellowy, lemon, lemony, amber, gold, golden; blond, light brown, fair, flaxen">Yellow</option>
        <option data-description=" sky blue, azure, cobalt (blue), sapphire, cerulean, navy (blue), saxe (blue), Oxford blue, Cambridge blue, ultramarine">Blue</option>
        <option data-description="A town in France">Orange</option>
        <option data-description="greenish, viridescent; olive green, pea green, emerald green, lime green, bottle green">Green</option>
        <option data-description="violet">Purple</option>
      </select>
    </much-select>
  </div>

  <div>
    <h3>A Placeholder</h3>
    <much-select placeholder="What is your favorite color?">
      <select slot="select-input">
        <option data-description="scarlet, vermilion, ruby, ruby red, ruby-colored, cherry">Red</option>
        <option data-description="yellowish, yellowy, lemon, lemony, amber, gold, golden; blond, light brown, fair, flaxen">Yellow</option>
        <option data-description=" sky blue, azure, cobalt (blue), sapphire, cerulean, navy (blue), saxe (blue), Oxford blue, Cambridge blue, ultramarine">Blue</option>
        <option data-description="A town in France">Orange</option>
        <option data-description="greenish, viridescent; olive green, pea green, emerald green, lime green, bottle green">Green</option>
        <option data-description="violet">Purple</option>
      </select>
    </much-select>
  </div>

  <div>
    <h3>Disabled</h3>
    <p>Disable the <code>&lt;much-select&gt;</code> with the <code>disabled</code> attribute.</p>
    <much-select disabled="disabled">
      <select slot="select-input">
        <option>Red</option>
        <option>Yellow</option>
        <option>Blue</option>
        <option>Orange</option>
        <option>Green</option>
        <option>Purple</option>
      </select>
    </much-select>
  </div>

  <div id="loading-indicator">
    <h3>Loading</h3>
    <p>Show and hide the loading indicator with the <code>loading</code> attribute.</p>
    <much-select loading="loading">
      <select slot="select-input">
        <option>Red</option>
        <option>Yellow</option>
        <option>Blue</option>
        <option>Orange</option>
        <option>Green</option>
        <option>Purple</option>
      </select>
    </much-select>
    <button>Toggle loading attribute</button>
    <script>
      document.querySelector("#loading-indicator button").addEventListener("click", () => {
        const muchSelectElement = document.querySelector("#loading-indicator much-select");
        if (muchSelectElement.hasAttribute("loading")) {
          muchSelectElement.removeAttribute("loading");
        } else {
          muchSelectElement.setAttribute("loading", "loading");
        }

      });
    </script>
  </div>

  <div>
    <h3>Disabled Options</h3>
    <much-select>
      <select slot="select-input">
        <option>Red</option>
        <option disabled>Yellow</option>
        <option>Blue</option>
        <option disabled>Orange</option>
        <option>Green</option>
        <option>Purple</option>
      </select>
    </much-select>
  </div>


  <div>
    <h3>Change Options With the Dom</h3>
    <button id="change-the-dom">Click me to change the dom</button>
    <much-select id="change-the-dom-much-select">
      <select id="change-the-dom-select" slot="select-input">
        <option value="1">These</option>
        <option value="2">are</option>
        <option value="3" data-description="initial options">the</option>
        <option value="4" data-description="them by changing the dom">Replace</option>
      </select>
    </much-select>
    <script>
      document.getElementById("change-the-dom").addEventListener("click", () => {
        document.getElementById("change-the-dom-much-select").innerHTML = `
          <select id="change-the-dom-select" slot="select-input">
            <option value="100">New</option>
            <option value="200">options</option>
            <option value="3" data-description="here">are</option>
            <option value="4">Hurray!</option>
          </select>
        `;
      });
    </script>
  </div>

  <div>
    <h3>Max Number of Items</h3>
    <much-select max-dropdown-items="3">
      <select slot="select-menu-input">
        <option value="1">These</option>
        <option value="2">are</option>
        <option value="3" data-description="initial options">the</option>
        <option value="4" data-description="them by changing the dom">Replace</option>
      </select>
    </much-select>
  </div>

  <div id="remote-api-example">
    <h3>Remote API</h3>
    <p>As you type we'll query the remote API for additional options.</p>
    <p>This dropdown searches the <a href="https://rickandmortyapi.com/">Rick and Morty</a> API for characters from the show by name.</p>
    <much-select max-dropdown-items="3">
      <select slot="select-menu-input"></select>
    </much-select>

    <script>
      const muchSelect = document.querySelector("#remote-api-example much-select");

      muchSelect.addEventListener("inputKeyUpDebounced", evt => {
        const searchString = evt.detail.searchString;
        if (searchString.length < 3) {
          // Lets not search unless we have at least 3 characters in the search string.
          return;
        }
        const url = new URL("https://rickandmortyapi.com/api/character/");
        url.searchParams.set("name", searchString);
        const searchRequest = new Request(url.toString());

        // This could take a while, so the user knows something is going on
        //  lets throw up the loading indicator.
        muchSelect.loading = true;

        const searchRickAndMortyCharactersByName = () => {
          fetch(searchRequest)
            .then(response => {
              if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`)
              }
              return response.json()
            })
            .then(data => {
              data.results.forEach(result => {
                muchSelect.addOption({value: result.name});
              });
              muchSelect.loading = false;
            })
        }

        // The API is just too fast, slow it down a bit so we can watch
        //  it work.
        window.setTimeout(searchRickAndMortyCharactersByName, 2000);
      })
    </script>
  </div>

  <div id="remote-api-example-pt2">
    <h3>Remote API (Pt 2)</h3>
    <p>As you type we'll query the remote API for additional options.</p>
    <p>This dropdown searches the <a href="https://rickandmortyapi.com/">Rick and Morty</a> API for characters from the show by name.</p>
    <much-select max-dropdown-items="30">
      <select slot="select-menu-input">
        <option selected="true" value="les Escaldes,Andorra,Escaldes-Engordany,3040051">les Escaldes,Andorra,Escaldes-Engordany,3040051</option>
      </select>
    </much-select>

    <script>
      const muchSelect = document.querySelector("#remote-api-example-pt2 much-select");

      const possibleOptions = [
        "les Escaldes,Andorra,Escaldes-Engordany,3040051",
        "Andorra la Vella,Andorra,Andorra la Vella,3041563",
        "Umm al Qaywayn,United Arab Emirates,Umm al Qaywayn,290594",
        "Ras al-Khaimah,United Arab Emirates,Ra ºs al Khaymah,291074",
        "Khawr FakkƒÅn,United Arab Emirates,Ash ShƒÅriqah,291696",
        "Dubai,United Arab Emirates,Dubai,292223",
        "Dibba Al-Fujairah,United Arab Emirates,Al Fujayrah,292231",
        "Dibba Al-Hisn,United Arab Emirates,Al Fujayrah,292239",
        "Sharjah,United Arab Emirates,Ash ShƒÅriqah,292672",
        "Ar Ruways,United Arab Emirates,Abu Dhabi,292688",
        "Al Fujayrah,United Arab Emirates,Al Fujayrah,292878",
        "Al Ain,United Arab Emirates,Abu Dhabi,292913",
        "Ajman,United Arab Emirates,Ajman,292932",
        "Adh Dhayd,United Arab Emirates,Ash ShƒÅriqah,292953",
        "Abu Dhabi,United Arab Emirates,Abu Dhabi,292968",
        "Zaranj,Afghanistan,Nƒ´mr≈´z,1120985",
        "Taloqan,Afghanistan,TakhƒÅr,1123004",
        "Shƒ´n·∏èan·∏è,Afghanistan,Herat,1125155",
        "ShibirghƒÅn,Afghanistan,JowzjƒÅn,1125444",
        "Shahrak,Afghanistan,Ghowr,1125896",
        "Sar-e Pul,Afghanistan,Sar-e Pol,1127110",
        "Sang-e ChƒÅrak,Afghanistan,Sar-e Pol,1127628",
        "Aƒ´bak,Afghanistan,SamangƒÅn,1127768",
        "RustƒÅq,Afghanistan,TakhƒÅr,1128265",
        "Qarqƒ´n,Afghanistan,JowzjƒÅn,1129516",
        "QarƒÅwul,Afghanistan,Kunduz,1129648",
        "Pul-e Khumrƒ´,Afghanistan,WilƒÅyat-e BaghlƒÅn,1130490",
        "PaghmƒÅn,Afghanistan,Kabul,1131316",
        "Nahrƒ´n,Afghanistan,WilƒÅyat-e BaghlƒÅn,1132495",
        "Maymana,Afghanistan,Faryab,1133453",
        "Mehtar LƒÅm,Afghanistan,LaghmƒÅn,1133574",
        "MazƒÅr-e Sharƒ´f,Afghanistan,Balkh,1133616",
        "Lashkar GƒÅh,Afghanistan,Helmand,1134720",
        "Kushk,Afghanistan,Herat,1135158",
        "Kunduz,Afghanistan,Kunduz,1135689",
        "Kh≈çst,Afghanistan,Khowst,1136469",
        "Khulm,Afghanistan,Balkh,1136575",
        "KhƒÅsh,Afghanistan,Nƒ´mr≈´z,1136863",
        "Khanabad,Afghanistan,Kunduz,1137168",
        "Karukh,Afghanistan,Herat,1137807",
        "KandahƒÅr,Afghanistan,KandahƒÅr,1138336",
        "Kabul,Afghanistan,Kabul,1138958",
        "JalƒÅlƒÅbƒÅd,Afghanistan,NangarhƒÅr,1139715",
        "Jabal os Saraj,Afghanistan,ParvƒÅn,1139807",
        "HerƒÅt,Afghanistan,Herat,1140026",
        "Ghormach,Afghanistan,Badghis,1141089",
        "Ghazni,Afghanistan,Ghaznƒ´,1141269",
        "Gereshk,Afghanistan,Helmand,1141540",
        "Gardƒìz,Afghanistan,Paktia,1141857",
        "Fayzabad,Afghanistan,Badakhshan,1142170",
        "Farah,Afghanistan,Farah,1142264",
        "Kafir Qala,Afghanistan,Herat,1142404",
        "Charikar,Afghanistan,ParvƒÅn,1145352",
        "Barakƒ´ Barak,Afghanistan,Lowgar,1147066",
        "BƒÅmyƒÅn,Afghanistan,BƒÅmƒ´ƒÅn,1147242",
        "Balkh,Afghanistan,Balkh,1147290",
        "BaghlƒÅn,Afghanistan,WilƒÅyat-e BaghlƒÅn,1147540",
        "ƒÄrt KhwƒÅjah,Afghanistan,TakhƒÅr,1148106",
        "ƒÄsmƒÅr,Afghanistan,Konar,1148205",
        "AsadƒÅbƒÅd,Afghanistan,Konar,1148311",
        "Andkh≈çy,Afghanistan,Faryab,1148658",
        "BƒÅzƒÅrak,Afghanistan,Panjshir,1429434",
        "Markaz-e Woluswalƒ´-ye ƒÄchƒ´n,Afghanistan,NangarhƒÅr,1469706",
        "Saint John‚Äôs,Antigua and Barbuda,Saint John,3576022",
        "The Valley,Anguilla,N/A,3573374",
        "Sarand√´,Albania,Vlor√´,363243",
        "Kuk√´s,Albania,Kuk√´s,782661",
        "Kor√ß√´,Albania,Kor√ß√´,782756",
        "Gjirokast√´r,Albania,Gjirokast√´r,783148",
        "Elbasan,Albania,Elbasan,783263",
        "Burrel,Albania,Dib√´r,783493",
        "Vlor√´,Albania,Vlor√´,3183719",
        "Tirana,Albania,Tiran√´,3183875",
        "Shkod√´r,Albania,Shkod√´r,3184081",
        "Patos Fshat,Albania,Fier,3184517",
        "Lushnj√´,Albania,Fier,3184862",
        "Lezh√´,Albania,Lezh√´,3184935",
        "La√ß,Albania,Lezh√´,3185012",
        "Ku√ßov√´,Albania,Berat,3185060",
        "Kruj√´,Albania,Durr√´s,3185082",
        "Kavaj√´,Albania,Tiran√´,3185211",
        "Fier-√áif√ßi,Albania,Fier,3185670",
        "Fier,Albania,Fier,3185672",
        "Durr√´s,Albania,Durr√´s,3185728",
        "Berat,Albania,Berat,3186084",
        "Kapan,Armenia,Syunik Province,174875",
        "Goris,Armenia,Syunik Province,174895",
      ];
      const searchForOptions = (searchString => {
          return () => {
            possibleOptions.filter(s => s.includes(searchString))
              .forEach(s => {
                  console.log("s", s);
                  muchSelect.addOption({ value: s });
                }
              );
          }}
      );

      muchSelect.addEventListener("ready", evt => {
        if (muchSelect.getAttribute("selected") && muchSelect.getAttribute("selected").length > 0) {
          // search
          const query = muchSelect.getAttribute("selected");

          window.setTimeout(searchForOptions(query), 2000);

        } else {
          possibleOptions.slice(0, 29).forEach(option => {
            muchSelect.addOption({ value: option });
          });
        }
      })

      muchSelect.addEventListener("inputKeyUpDebounced", evt => {
        const searchString = evt.detail.searchString;
        if (searchString.length < 3) {
          // Lets not search unless we have at least 3 characters in the search string.
          return;
        }

        // This could take a while, so the user knows something is going on
        //  lets throw up the loading indicator.
        muchSelect.loading = true;

        // The API is just too fast, slow it down a bit so we can watch
        //  it work.
        window.setTimeout(searchForOptions(searchString), 2000);
      })
    </script>
  </div>
</div>

<script src="./index.js"></script>
</body>
</html>
